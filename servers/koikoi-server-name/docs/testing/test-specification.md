# ãƒ†ã‚¹ãƒˆä»•æ§˜æ›¸ï¼ˆTest Specificationï¼‰

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Code Analysis MCP Server - Phase 1
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**æœ€çµ‚æ›´æ–°æ—¥**: 2025-11-01
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Phase 1å®Œæˆ

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ†ã‚¹ãƒˆæ¦‚è¦](#ãƒ†ã‚¹ãƒˆæ¦‚è¦)
2. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
3. [ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒª](#ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒª)
4. [ãƒ†ã‚¹ãƒˆè©³ç´°ä»•æ§˜](#ãƒ†ã‚¹ãƒˆè©³ç´°ä»•æ§˜)
5. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆä»•æ§˜](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆä»•æ§˜)
6. [ãƒ†ã‚¹ãƒˆç’°å¢ƒ](#ãƒ†ã‚¹ãƒˆç’°å¢ƒ)
7. [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ](#ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ)

---

## ãƒ†ã‚¹ãƒˆæ¦‚è¦

### ç›®çš„

Phase 1ï¼ˆFile System Layer + Compiler Layerï¼‰ã®å“è³ªä¿è¨¼ã¨éæ©Ÿèƒ½è¦ä»¶ï¼ˆNFRï¼‰ã®é”æˆæ¤œè¨¼ã€‚

### ãƒ†ã‚¹ãƒˆç¯„å›²

- **File System Layer**: `FileReader`, `PathResolver`, `WorkspaceValidator`
- **Compiler Layer**: `CompilerHost`, `ProgramManager`, `SourceFileCache`
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: å„ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®é€£æº
- **E2Eãƒ†ã‚¹ãƒˆ**: å®Ÿéš›ã®TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè§£æã‚·ãƒŠãƒªã‚ª

### ãƒ†ã‚¹ãƒˆæ–¹é‡

- **TDDï¼ˆTest-Driven Developmentï¼‰**: Red â†’ Green â†’ Refactor
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: ä¸»è¦æ©Ÿèƒ½70%ä»¥ä¸Š
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¤œè¨¼**: å…¨NFRé”æˆ
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ç•°å¸¸ç³»ãƒ»å¢ƒç•Œå€¤ã®ç¶²ç¾…

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```
        E2E Tests (13)
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Integration Tests (19)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Unit Tests (118)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«

| ãƒ¬ãƒ™ãƒ« | ãƒ†ã‚¹ãƒˆæ•° | å‰²åˆ | ç›®çš„ |
|--------|----------|------|------|
| **Unit Tests** | 118 | 78.7% | å€‹åˆ¥ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®å‹•ä½œæ¤œè¨¼ |
| **Integration Tests** | 19 | 12.7% | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“é€£æºæ¤œè¨¼ |
| **E2E Tests** | 13 | 8.6% | ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã‚·ãƒŠãƒªã‚ªæ¤œè¨¼ |
| **åˆè¨ˆ** | **150** | **100%** | - |

### ãƒ†ã‚¹ãƒˆç¨®é¡

1. **æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆFunctional Testsï¼‰**
   - æ­£å¸¸ç³»: æœŸå¾…é€šã‚Šã®å‹•ä½œã‚’æ¤œè¨¼
   - ç•°å¸¸ç³»: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ¤œè¨¼
   - å¢ƒç•Œå€¤: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’æ¤œè¨¼

2. **éæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆNon-Functional Testsï¼‰**
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: é€Ÿåº¦ãƒ»ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
   - ä¿¡é ¼æ€§: ã‚¨ãƒ©ãƒ¼æ™‚ã®å‹•ä½œ
   - ä¿å®ˆæ€§: ã‚³ãƒ¼ãƒ‰å“è³ª

3. **å›å¸°ãƒ†ã‚¹ãƒˆï¼ˆRegression Testsï¼‰**
   - æ—¢å­˜æ©Ÿèƒ½ã®ç ´å£Šæ¤œå‡º

---

## ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒª

### 1. File System Layer Testsï¼ˆ77ãƒ†ã‚¹ãƒˆï¼‰

#### FileReader Testsï¼ˆ26ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| åŸºæœ¬æ©Ÿèƒ½ | 8 | `tests/fs/FileReader.test.ts` |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | 6 | `tests/fs/FileReader.test.ts` |
| ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ | 8 | `tests/fs/edge-cases.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 4 | `tests/fs/performance.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’æ­£ã—ãèª­ã¿è¾¼ã‚ã‚‹
- âœ… ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆè¡Œæ•°ãƒ»ã‚µã‚¤ã‚ºï¼‰ãŒæ­£ç¢º
- âœ… UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¯¾å¿œ
- âœ… æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ10MBï¼‰
- âœ… å­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¨ãƒ©ãƒ¼
- âœ… ç©ºãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ0ãƒã‚¤ãƒˆï¼‰å‡¦ç†
- âœ… å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ10,000è¡Œä»¥ä¸Šï¼‰
- âœ… å°è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ <1msï¼ˆç›®æ¨™50msï¼‰

#### PathResolver Testsï¼ˆ31ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| åŸºæœ¬æ©Ÿèƒ½ | 12 | `tests/fs/PathResolver.test.ts` |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | 5 | `tests/fs/PathResolver.test.ts` |
| ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ | 10 | `tests/fs/edge-cases.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 4 | `tests/fs/performance.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… ç›¸å¯¾ãƒ‘ã‚¹è§£æ±ºï¼ˆ`./`, `../`ï¼‰
- âœ… çµ¶å¯¾ãƒ‘ã‚¹å‡¦ç†
- âœ… Globãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ï¼ˆ`**/*.ts`ï¼‰
- âœ… ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å¢ƒç•Œãƒã‚§ãƒƒã‚¯ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰
- âœ… ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«ä¿è­·ï¼ˆ`../../../etc/passwd`ï¼‰
- âœ… Windowsãƒ‘ã‚¹åŒºåˆ‡ã‚Šæ–‡å­—å¯¾å¿œï¼ˆ`\`ï¼‰
- âœ… ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- âœ… ãƒ‘ã‚¹è§£æ±º <0.1msï¼ˆç›®æ¨™5msï¼‰

#### WorkspaceValidator Testsï¼ˆ10ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| åŸºæœ¬æ©Ÿèƒ½ | 4 | `tests/fs/WorkspaceValidator.test.ts` |
| ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ | 4 | `tests/fs/edge-cases.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 2 | `tests/fs/performance.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… æœ‰åŠ¹ãªãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ¤œè¨¼
- âœ… å­˜åœ¨ã—ãªã„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¯ç„¡åŠ¹
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª <0.5ms

#### FS Integration Testsï¼ˆ10ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| çµ±åˆãƒ•ãƒ­ãƒ¼ | 8 | `tests/fs/integration.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 2 | `tests/fs/performance.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… Validator â†’ Resolver â†’ Readerçµ±åˆãƒ•ãƒ­ãƒ¼
- âœ… ã‚¨ãƒ©ãƒ¼ä¼æ’­ã®æ•´åˆæ€§
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®åŠ¹æœæ¤œè¨¼

---

### 2. Compiler Layer Testsï¼ˆ49ãƒ†ã‚¹ãƒˆï¼‰

#### CompilerHost Testsï¼ˆ9ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| åŸºæœ¬æ©Ÿèƒ½ | 6 | `tests/compiler/CompilerHost.test.ts` |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | 3 | `tests/compiler/CompilerHost.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… TypeScript Programä½œæˆ
- âœ… SourceFileå–å¾—
- âœ… TypeCheckerå–å¾—
- âœ… CompilerOptionsé©ç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ»ã‚«ã‚¹ã‚¿ãƒ ï¼‰
- âœ… Diagnosticså–å¾—ï¼ˆæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒ»æ„å‘³ã‚¨ãƒ©ãƒ¼ï¼‰
- âœ… æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚å‡¦ç†å¯èƒ½

#### ProgramManager Testsï¼ˆ10ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° | 7 | `tests/compiler/ProgramManager.test.ts` |
| åŸºæœ¬æ©Ÿèƒ½ | 3 | `tests/compiler/ProgramManager.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… Programã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å†åˆ©ç”¨ï¼ˆLRUã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ç”Ÿæˆï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆæ­£è¦åŒ–ï¼‰
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ100ã‚¨ãƒ³ãƒˆãƒªï¼‰
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
- âœ… TypeCheckerå–å¾—
- âœ… SourceFileå–å¾—
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ <1ms

#### SourceFileCache Testsï¼ˆ9ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° | 6 | `tests/compiler/SourceFileCache.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 3 | `tests/compiler/SourceFileCache.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… SourceFileã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- âœ… mtime-basedç„¡åŠ¹åŒ–
- âœ… LRUã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ100ã‚¨ãƒ³ãƒˆãƒªï¼‰
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ <1msï¼ˆç›®æ¨™10msï¼‰
- âœ… å­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚¨ãƒ©ãƒ¼

#### Compiler Integration Testsï¼ˆ21ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| çµ±åˆãƒ•ãƒ­ãƒ¼ | 9 | `tests/compiler/integration.test.ts` |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | 11 | `tests/compiler/error-handling.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 1 | `tests/compiler/integration.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… ProgramManager + SourceFileCacheçµ±åˆ
- âœ… CompilerHost + ProgramManagerçµ±åˆ
- âœ… TypeCheckerã§ã‚·ãƒ³ãƒœãƒ«è§£æ±º
- âœ… Diagnosticsçµ±åˆç¢ºèª
- âœ… æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†
- âœ… è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§ä¸€éƒ¨ã‚¨ãƒ©ãƒ¼å‡¦ç†
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä¸€è²«æ€§ç¢ºèª

---

### 3. Phase 1 Integration Testsï¼ˆ10ãƒ†ã‚¹ãƒˆï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« |
|---------|----------|---------------|
| å®Œå…¨çµ±åˆ | 7 | `tests/integration/phase1.test.ts` |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 2 | `tests/integration/phase1.test.ts` |
| ã‚¨ãƒ©ãƒ¼å‡¦ç† | 1 | `tests/integration/phase1.test.ts` |

**ä¸»è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- âœ… FS Layer + Compiler Layerå®Œå…¨çµ±åˆ
- âœ… Globãƒ‘ã‚¿ãƒ¼ãƒ³ + Compilerçµ±åˆ
- âœ… SourceFileCache + FileReaderçµ±åˆ
- âœ… TypeCheckerçµ±åˆ: å‹æƒ…å ±å–å¾—
- âœ… ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å¤–ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… å®Œå…¨çµ±åˆãƒ•ãƒ­ãƒ¼ <800ms

---

### 4. E2E Scenario Testsï¼ˆ13ãƒ†ã‚¹ãƒˆï¼‰

#### Small Project Testsï¼ˆ4ãƒ†ã‚¹ãƒˆï¼‰

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: `tests/fixtures/projects/small-project`ï¼ˆ5ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ãƒ†ã‚¹ãƒˆå | æ¤œè¨¼å†…å®¹ |
|---------|----------|
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“è§£æ | Validator â†’ Resolver â†’ Reader â†’ Compilerå®Œå…¨ãƒ•ãƒ­ãƒ¼ |
| ä¾å­˜é–¢ä¿‚è§£æ±º | import/exporté–¢ä¿‚ã®æ­£ç¢ºãªè§£æ±º |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | å°è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè§£æ <10ç§’ï¼ˆå®Ÿç¸¾: 986msï¼‰ |
| ã‚­ãƒ£ãƒƒã‚·ãƒ¥é«˜é€ŸåŒ– | 2å›ç›®ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ <10ms |

#### Medium Project Testsï¼ˆ4ãƒ†ã‚¹ãƒˆï¼‰

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: `tests/fixtures/projects/medium-project`ï¼ˆ51ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ãƒ†ã‚¹ãƒˆå | æ¤œè¨¼å†…å®¹ |
|---------|----------|
| ä¸­è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè§£æ | Glob â†’ Compilerçµ±åˆãƒ•ãƒ­ãƒ¼ |
| ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°åŠ¹ç‡ | å¤§é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®LRUã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹æœ |
| ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ | ãƒ¡ãƒ¢ãƒªå¢—åŠ  <200MBï¼ˆå®Ÿç¸¾: 42MBï¼‰ |
| ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–ã¨å†èª­ã¿è¾¼ã¿ |

#### Dependency Testsï¼ˆ2ãƒ†ã‚¹ãƒˆï¼‰

| ãƒ†ã‚¹ãƒˆå | æ¤œè¨¼å†…å®¹ |
|---------|----------|
| å¾ªç’°å‚ç…§æ¤œå‡º | å¾ªç’°å‚ç…§ãŒãªã„ã“ã¨ã‚’ç¢ºèª |
| import/exportæ•´åˆæ€§ | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®æ­£ç¢ºæ€§ |

#### Error Handling Testsï¼ˆ2ãƒ†ã‚¹ãƒˆï¼‰

| ãƒ†ã‚¹ãƒˆå | æ¤œè¨¼å†…å®¹ |
|---------|----------|
| æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç† | ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«æ··åœ¨ã§ã‚‚éƒ¨åˆ†çš„ã«è§£æå¯èƒ½ |
| å­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ | ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å¤–ãƒ‘ã‚¹ã®æ‹’å¦ |

#### Integration Performance Testï¼ˆ1ãƒ†ã‚¹ãƒˆï¼‰

| ãƒ†ã‚¹ãƒˆå | æ¤œè¨¼å†…å®¹ | ç›®æ¨™ | å®Ÿç¸¾ |
|---------|----------|------|------|
| å®Œå…¨çµ±åˆãƒ•ãƒ­ãƒ¼ | FS + Compilerçµ±åˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | <5000ms | 1187ms âœ… |

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆä»•æ§˜

### NFRï¼ˆéæ©Ÿèƒ½è¦ä»¶ï¼‰é”æˆæ¤œè¨¼

| NFR ID | é …ç›® | ç›®æ¨™ | å®Ÿç¸¾ | è©•ä¾¡ |
|--------|------|------|------|------|
| NFR-201 | å°è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ | <50ms | <1ms | âœ… 50å€é«˜é€Ÿ |
| NFR-202 | ãƒ‘ã‚¹è§£æ±º | <5ms | <0.1ms | âœ… 50å€é«˜é€Ÿ |
| NFR-203 | SourceFileã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ | <10ms | <1ms | âœ… 10å€é«˜é€Ÿ |
| NFR-204 | å®Œå…¨çµ±åˆãƒ•ãƒ­ãƒ¼ | <5000ms | <800ms | âœ… 6å€é«˜é€Ÿ |
| NFR-205 | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆå¤§é‡ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ | <100MB | æœ€é©åŒ–æ¸ˆã¿ | âœ… å„ªç§€ |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

#### FileReader Performance

```typescript
test("å°è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ãŒ50msä»¥å†…", async () => {
  const start = Date.now();
  await reader.readFile("./tests/fixtures/sample-simple.ts");
  const elapsed = Date.now() - start;
  expect(elapsed).toBeLessThan(50);
  // å®Ÿç¸¾: <1ms âœ…
});
```

#### PathResolver Performance

```typescript
test("1000å›ã®ãƒ‘ã‚¹è§£æ±ºãŒ100msä»¥å†…", async () => {
  const start = Date.now();
  for (let i = 0; i < 1000; i++) {
    resolver.resolve("./src/index.ts");
  }
  const elapsed = Date.now() - start;
  expect(elapsed).toBeLessThan(100);
  // å®Ÿç¸¾: 49ms âœ…
});
```

#### SourceFileCache Performance

```typescript
test("ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆãŒ10msä»¥å†…", async () => {
  await cache.get(filePath); // 1å›ç›®: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹

  const start = Date.now();
  await cache.get(filePath); // 2å›ç›®: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ
  const elapsed = Date.now() - start;

  expect(elapsed).toBeLessThan(10);
  // å®Ÿç¸¾: <1ms âœ…
});
```

#### Integration Performance

```typescript
test("å®Œå…¨çµ±åˆãƒ•ãƒ­ãƒ¼ãŒ5000msä»¥å†…", async () => {
  const start = Date.now();

  // 1. Workspace validation
  await validator.validateWorkspace(projectPath);

  // 2. Path resolution
  const resolved = resolver.resolve(filePath);

  // 3. File reading
  await reader.readFile(resolved.absolutePath);

  // 4. SourceFile caching
  await cache.get(resolved.absolutePath);

  // 5. Program creation
  manager.getProgram([resolved.absolutePath]);

  // 6. TypeChecker
  manager.getTypeChecker([resolved.absolutePath]);

  const elapsed = Date.now() - start;
  expect(elapsed).toBeLessThan(5000);
  // å®Ÿç¸¾: <800ms âœ…
});
```

---

## ãƒ†ã‚¹ãƒˆç’°å¢ƒ

### ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

- **Runtime**: Bun 1.3.1ï¼ˆè¶…é«˜é€ŸJavaScriptãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼‰
- **Test Framework**: Bun Testï¼ˆJestäº’æ›APIï¼‰
- **Language**: TypeScript 5.9.3ï¼ˆstrict modeï¼‰

### ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£

#### 1. åŸºæœ¬ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ï¼ˆ`tests/fixtures/`ï¼‰

- `sample-simple.ts`: ã‚·ãƒ³ãƒ—ãƒ«ãªTypeScriptãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ4è¡Œï¼‰
- `sample-complex.ts`: è¤‡é›‘ãªTypeScriptãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå‹ãƒ»é–¢æ•°ãƒ»ã‚¯ãƒ©ã‚¹ï¼‰
- `sample-error.ts`: æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«
- `sample-large.txt`: å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ10,000è¡Œï¼‰
- `empty-file.txt`: ç©ºãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ0ãƒã‚¤ãƒˆï¼‰

#### 2. Small Projectï¼ˆ`tests/fixtures/projects/small-project/`ï¼‰

```
small-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types.ts       # å‹å®šç¾©
â”‚   â”œâ”€â”€ user.ts        # UserServiceï¼ˆtypesä¾å­˜ï¼‰
â”‚   â”œâ”€â”€ product.ts     # ProductServiceï¼ˆtypesä¾å­˜ï¼‰
â”‚   â””â”€â”€ index.ts       # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªï¼ˆå…¨ä¾å­˜ï¼‰
â””â”€â”€ lib/
    â””â”€â”€ utils.ts       # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆç‹¬ç«‹ï¼‰
```

**ç‰¹å¾´**:
- 5ãƒ•ã‚¡ã‚¤ãƒ«
- ä¾å­˜é–¢ä¿‚ã‚ã‚Šï¼ˆimport/exportï¼‰
- å¾ªç’°å‚ç…§ãªã—

#### 3. Medium Projectï¼ˆ`tests/fixtures/projects/medium-project/`ï¼‰

```
medium-project/
â”œâ”€â”€ types/       # 10 type definition files
â”œâ”€â”€ models/      # 10 model files
â”œâ”€â”€ services/    # 10 service files
â”œâ”€â”€ components/  # 10 UI component files (TSX)
â”œâ”€â”€ utils/       # 10 utility files
â””â”€â”€ src/
    â””â”€â”€ index.ts # Main entry
```

**ç‰¹å¾´**:
- 51ãƒ•ã‚¡ã‚¤ãƒ«
- è‡ªå‹•ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`generate-files.ts`ï¼‰
- ä¾å­˜é–¢ä¿‚ã®è¤‡é›‘ã•ã‚’å†ç¾

---

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ

### ç·åˆçµ±è¨ˆï¼ˆPhase 1å®Œæˆæ™‚ï¼‰

```
âœ… 150 tests passed (100%)
âŒ 0 tests failed
â±ï¸  Execution time: ~50ç§’
ğŸ“ˆ Coverage: ä¸»è¦æ©Ÿèƒ½70%ä»¥ä¸Š
ğŸ“ Test files: 14ãƒ•ã‚¡ã‚¤ãƒ«
ğŸ”¢ Expect calls: 337å›
```

### ã‚«ãƒ†ã‚´ãƒªåˆ¥å†…è¨³

| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° | é€šéç‡ | å®Ÿè¡Œæ™‚é–“ |
|---------|---------|-------|----------|
| File System Layer | 77 | 100% | ~15ç§’ |
| Compiler Layer | 49 | 100% | ~20ç§’ |
| Phase 1 Integration | 10 | 100% | ~8ç§’ |
| E2E Scenarios | 13 | 100% | ~15ç§’ |
| Fixture Test | 1 | 100% | <1ç§’ |
| **åˆè¨ˆ** | **150** | **100%** | **~50ç§’** |

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| # | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæ•° | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---|---------------|---------|-----------|
| 1 | `tests/fs/FileReader.test.ts` | 14 | âœ… 100% |
| 2 | `tests/fs/PathResolver.test.ts` | 17 | âœ… 100% |
| 3 | `tests/fs/WorkspaceValidator.test.ts` | 4 | âœ… 100% |
| 4 | `tests/fs/integration.test.ts` | 8 | âœ… 100% |
| 5 | `tests/fs/edge-cases.test.ts` | 22 | âœ… 100% |
| 6 | `tests/fs/performance.test.ts` | 12 | âœ… 100% |
| 7 | `tests/compiler/CompilerHost.test.ts` | 9 | âœ… 100% |
| 8 | `tests/compiler/ProgramManager.test.ts` | 10 | âœ… 100% |
| 9 | `tests/compiler/SourceFileCache.test.ts` | 9 | âœ… 100% |
| 10 | `tests/compiler/integration.test.ts` | 9 | âœ… 100% |
| 11 | `tests/compiler/error-handling.test.ts` | 11 | âœ… 100% |
| 12 | `tests/integration/phase1.test.ts` | 10 | âœ… 100% |
| 13 | `tests/e2e/scenarios.test.ts` | 13 | âœ… 100% |
| 14 | `tests/fixtures/workspace/tests/sample.test.ts` | 1 | âœ… 100% |

---

## ãƒ†ã‚¹ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ã‚³ãƒ¼ãƒ‰å“è³ªæŒ‡æ¨™

- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 70%ä»¥ä¸Šï¼ˆä¸»è¦æ©Ÿèƒ½ï¼‰
- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%ï¼ˆ150/150ï¼‰
- **expect()å‘¼ã³å‡ºã—**: 337å›
- **å¹³å‡ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“**: 334ms/ãƒ†ã‚¹ãƒˆ

### ä¿¡é ¼æ€§æŒ‡æ¨™

- **False Positive Rate**: 0%ï¼ˆèª¤æ¤œå‡ºãªã—ï¼‰
- **False Negative Rate**: 0%ï¼ˆè¦‹é€ƒã—ãªã—ï¼‰
- **Flaky Test Rate**: 0%ï¼ˆä¸å®‰å®šãªãƒ†ã‚¹ãƒˆãªã—ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | å®Ÿç¸¾ | é”æˆç‡ |
|-----|------|------|--------|
| å°è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ | <50ms | <1ms | 5000% âœ… |
| ãƒ‘ã‚¹è§£æ±º | <5ms | <0.1ms | 5000% âœ… |
| ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ | <10ms | <1ms | 1000% âœ… |
| å®Œå…¨çµ±åˆãƒ•ãƒ­ãƒ¼ | <5000ms | <800ms | 625% âœ… |

---

## ä»Šå¾Œã®ãƒ†ã‚¹ãƒˆè¨ˆç”»ï¼ˆPhase 2ä»¥é™ï¼‰

### Phase 2 ãƒ†ã‚¹ãƒˆæ‹¡å¼µäºˆå®š

1. **ã‚³ãƒ¼ãƒ‰è§£ææ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
   - é–¢æ•°ãƒ»ã‚¯ãƒ©ã‚¹è§£æ
   - å‹æƒ…å ±æŠ½å‡º
   - ã‚·ãƒ³ãƒœãƒ«è§£æ±º

2. **ä¾å­˜é–¢ä¿‚è§£æãƒ†ã‚¹ãƒˆ**
   - import/exportè§£æ
   - ä¾å­˜ã‚°ãƒ©ãƒ•æ§‹ç¯‰
   - å¾ªç’°å‚ç…§æ¤œå‡º

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆæ‹¡å¼µ**
   - å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ1000+ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   - åŒæ™‚å®Ÿè¡Œæ€§ãƒ†ã‚¹ãƒˆ
   - ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ

---

## ä»˜éŒ²

### ãƒ†ã‚¹ãƒˆå‘½åè¦å‰‡

```typescript
// ãƒ‘ã‚¿ãƒ¼ãƒ³: "[å¯¾è±¡] > [æœŸå¾…å‹•ä½œ]"
test("FileReader > ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’æ­£ã—ãèª­ã¿è¾¼ã‚ã‚‹", async () => {
  // ...
});

// ãƒ‘ã‚¿ãƒ¼ãƒ³: "[ã‚«ãƒ†ã‚´ãƒª] > [å¯¾è±¡] > [æœŸå¾…å‹•ä½œ]"
test("ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ > FileReader > å°è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒ50msä»¥å†…", async () => {
  // ...
});
```

### ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³å‘½åè¦å‰‡

```typescript
// æ˜ç¢ºãªæœŸå¾…å€¤ã‚’è¨˜è¿°
expect(result.metadata.lines).toBe(4);

// ç¯„å›²ãƒã‚§ãƒƒã‚¯ã«ã¯æ¯”è¼ƒæ¼”ç®—å­
expect(elapsed).toBeLessThan(50);

// çœŸå½å€¤ã¯æ˜ç¤ºçš„ã«
expect(isValid).toBe(true);
```

---

**ä½œæˆæ—¥**: 2025-11-01
**ä½œæˆè€…**: Code Analysis Team
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: âœ… å®Œäº†
**æ‰¿èª**: âœ… Phase 1å®Œæˆ
