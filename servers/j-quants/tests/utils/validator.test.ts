/**
 * TASK-0005: ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
 *
 * ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚§ãƒ¼ã‚ºã€‘: TDD Red Phaseï¼ˆå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ä½œæˆï¼‰
 * ã€ä½œæˆæ—¥ã€‘: 2025-10-29
 * ã€ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‘: Vitest 2.1.4
 * ã€è¨€èªã€‘: TypeScript 5.x
 * ã€ç›®çš„ã€‘: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå®Ÿè£…ã¯å­˜åœ¨ã—ãªã„ãŸã‚ã€å…¨ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ï¼‰
 */

import { describe, it, expect } from 'vitest';
import {
  validateCode,
  validateDate,
  validateDateRange,
  validateRequiredParam,
  validateEnum,
  ValidationError,
} from '../../src/utils/validator';
import { Market } from '../../src/types';

// =========================================
// æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ4ä»¶ï¼‰
// =========================================
describe('validator.ts - æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹', () => {
  /**
   * TC-NORMAL-005: validateCode() - æ­£å¸¸ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: 4æ¡æ•°å­—ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãŒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€šéã™ã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: æ¨™æº–çš„ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰"1234"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚ŒãšvoidãŒè¿”å´
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   */
  it('TC-NORMAL-005: validateCode() - æ­£å¸¸ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: 4æ¡æ•°å­—ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: æ¨™æº–çš„ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ— = 9984ï¼‰
    const code = '1234';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateCode()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œãªã„
    // ã€çµæœæ¤œè¨¼ã€‘: æ­£å¸¸ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹ã“ã¨
    expect(() => validateCode(code)).not.toThrow();
    // ã€ç¢ºèªå†…å®¹ã€‘: 4æ¡æ•°å­—ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¸€è‡´ã™ã‚‹ãŸã‚ã‚¨ãƒ©ãƒ¼ãªã—
  });

  /**
   * TC-NORMAL-006: validateDate() - æ­£å¸¸ãªæ—¥ä»˜ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: YYYY-MM-DDå½¢å¼ã®æ—¥ä»˜ãŒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€šéã™ã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: æ¨™æº–çš„ãªISO 8601æ—¥ä»˜å½¢å¼"2025-10-29"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚ŒãšvoidãŒè¿”å´
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   */
  it('TC-NORMAL-006: validateDate() - æ­£å¸¸ãªæ—¥ä»˜', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: YYYY-MM-DDå½¢å¼ã®æ—¥ä»˜ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: 2025å¹´10æœˆ29æ—¥ï¼ˆå¦¥å½“ãªæ—¥ä»˜ï¼‰
    const date = '2025-10-29';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateDate()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: æ—¥ä»˜ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œãªã„
    // ã€çµæœæ¤œè¨¼ã€‘: æ­£å¸¸ãªæ—¥ä»˜ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹ã“ã¨
    expect(() => validateDate(date)).not.toThrow();
    // ã€ç¢ºèªå†…å®¹ã€‘: YYYY-MM-DDå½¢å¼ã‹ã¤å®Ÿåœ¨ã™ã‚‹æ—¥ä»˜ã®ãŸã‚ã‚¨ãƒ©ãƒ¼ãªã—
  });

  /**
   * TC-NORMAL-007: validateDateRange() - æ­£å¸¸ãªæ—¥ä»˜ç¯„å›²ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: from <= toã®æ—¥ä»˜ç¯„å›²ãŒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€šéã™ã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: é–‹å§‹æ—¥"2025-01-01"ã‹ã‚‰çµ‚äº†æ—¥"2025-12-31"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚ŒãšvoidãŒè¿”å´
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   */
  it('TC-NORMAL-007: validateDateRange() - æ­£å¸¸ãªæ—¥ä»˜ç¯„å›²', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: from <= to ã®æ—¥ä»˜ç¯„å›²ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: 1å¹´é–“ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ç¯„å›²
    const from = '2025-01-01';
    const to = '2025-12-31';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateDateRange()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: æ—¥ä»˜ç¯„å›²ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œãªã„
    // ã€çµæœæ¤œè¨¼ã€‘: æ­£å¸¸ãªæ—¥ä»˜ç¯„å›²ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹ã“ã¨
    expect(() => validateDateRange(from, to)).not.toThrow();
    // ã€ç¢ºèªå†…å®¹ã€‘: from <= to ã®é–¢ä¿‚ãŒæˆç«‹ã™ã‚‹ãŸã‚ã‚¨ãƒ©ãƒ¼ãªã—
  });

  /**
   * TC-NORMAL-008: validateEnum() - åˆ—æŒ™å‹ã®æ­£å¸¸å€¤ğŸŸ¡
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: TypeScriptåˆ—æŒ™å‹ã®å€¤æ¤œè¨¼ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: Marketåˆ—æŒ™å‹ã®æ­£å¸¸å€¤'Prime'ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: åˆ—æŒ™å‹ã«å«ã¾ã‚Œã‚‹å€¤ãŒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€šé
   * ğŸŸ¡ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é»„ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã‹ã‚‰æ¨æ¸¬ã€å®Ÿè£…è©³ç´°ã¯ä¸æ˜ï¼‰
   */
  it('TC-NORMAL-008: validateEnum() - åˆ—æŒ™å‹ã®æ­£å¸¸å€¤', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: Marketåˆ—æŒ™å‹ã®æ­£å¸¸å€¤ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ å¸‚å ´
    const value = 'Prime';
    const paramName = 'market';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateEnum()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: åˆ—æŒ™å‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œãªã„
    // ã€çµæœæ¤œè¨¼ã€‘: åˆ—æŒ™å‹ã«å«ã¾ã‚Œã‚‹å€¤ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹ã“ã¨
    expect(() => validateEnum(value, Market, paramName)).not.toThrow();
    // ã€ç¢ºèªå†…å®¹ã€‘: 'Prime' ã¯ Marketåˆ—æŒ™å‹ã«å«ã¾ã‚Œã‚‹ãŸã‚ã‚¨ãƒ©ãƒ¼ãªã—
  });
});

// =========================================
// ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ5ä»¶ï¼‰
// =========================================
describe('validator.ts - ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹', () => {
  /**
   * TC-ERROR-002: validateCode() - ä¸æ­£ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆ3æ¡ï¼‰ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: æ¡æ•°ä¸è¶³ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: 3æ¡ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰"123"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   * ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: æ¡æ•°ä¸è¶³ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰
   * ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: ä¸æ­£ãªã‚³ãƒ¼ãƒ‰ã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‰ãªã„ãŸã‚
   */
  it('TC-ERROR-002: validateCode() - ä¸æ­£ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆ3æ¡ï¼‰', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: 3æ¡ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: æ¡æ•°ä¸è¶³ã®ã‚³ãƒ¼ãƒ‰
    // ã€ä¸æ­£ãªç†ç”±ã€‘: éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¯4æ¡å›ºå®š
    // ã€å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ªã€‘: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒŸã‚¹ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼
    const code = '123';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateCode()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: ä¸æ­£ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
    // ã€çµæœæ¤œè¨¼ã€‘: æ¡æ•°ä¸è¶³ã®ã‚³ãƒ¼ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
    expect(() => validateCode(code)).toThrow(ValidationError);
    // ã€ç¢ºèªå†…å®¹ã€‘: éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¯4æ¡ã®æ•°å­—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
    expect(() => validateCode(code)).toThrow('éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¯4æ¡ã®æ•°å­—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
    // ã€ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§ã€‘: ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’äº‹å‰ã«é˜²æ­¢
  });

  /**
   * TC-ERROR-003: validateCode() - ä¸æ­£ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆè‹±å­—å«ã‚€ï¼‰ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: æ•°å­—ä»¥å¤–ã®æ–‡å­—ã‚’å«ã‚€éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: è‹±å­—"ABCD"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   * ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: æ•°å­—ä»¥å¤–ã®æ–‡å­—ãŒå«ã¾ã‚Œã‚‹
   * ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: ç±³å›½æ ªå¼ã‚³ãƒ¼ãƒ‰ï¼ˆAAPLç­‰ï¼‰ã¨ã®æ··åŒã‚’é˜²ã
   */
  it('TC-ERROR-003: validateCode() - ä¸æ­£ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆè‹±å­—å«ã‚€ï¼‰', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: è‹±å­—ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: è‹±å­—ã®ã‚³ãƒ¼ãƒ‰
    // ã€ä¸æ­£ãªç†ç”±ã€‘: æ—¥æœ¬ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¯æ•°å­—ã®ã¿
    // ã€å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ªã€‘: ç±³å›½æ ªã‚³ãƒ¼ãƒ‰ã¨ã®æ··åŒ
    const code = 'ABCD';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateCode()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: ä¸æ­£ãªéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
    // ã€çµæœæ¤œè¨¼ã€‘: è‹±å­—ã‚’å«ã‚€ã‚³ãƒ¼ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
    expect(() => validateCode(code)).toThrow(ValidationError);
    // ã€ç¢ºèªå†…å®¹ã€‘: éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¯4æ¡ã®æ•°å­—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
    expect(() => validateCode(code)).toThrow('éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã¯4æ¡ã®æ•°å­—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
    // ã€ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§ã€‘: å½¢å¼ãŒç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã®èª¤å…¥åŠ›ã‚’é˜²æ­¢
  });

  /**
   * TC-ERROR-004: validateDate() - ä¸æ­£ãªæ—¥ä»˜å½¢å¼ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: YYYY-MM-DDä»¥å¤–ã®æ—¥ä»˜å½¢å¼ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: DD/MM/YYYYå½¢å¼"29/10/2025"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   * ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: æ—¥ä»˜å½¢å¼ãŒç•°ãªã‚‹
   * ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: APIä»•æ§˜ï¼ˆYYYY-MM-DDï¼‰ã¨ã®æ•´åˆæ€§ç¢ºä¿
   */
  it('TC-ERROR-004: validateDate() - ä¸æ­£ãªæ—¥ä»˜å½¢å¼', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: DD/MM/YYYYå½¢å¼ã®æ—¥ä»˜ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: ã‚¹ãƒ©ãƒƒã‚·ãƒ¥åŒºåˆ‡ã‚Šã®æ—¥ä»˜å½¢å¼
    // ã€ä¸æ­£ãªç†ç”±ã€‘: ã‚¹ãƒ©ãƒƒã‚·ãƒ¥åŒºåˆ‡ã‚Šã®æ—¥ä»˜å½¢å¼
    // ã€å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ªã€‘: ç•°ãªã‚‹åœ°åŸŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ··å…¥
    const date = '29/10/2025';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateDate()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: ä¸æ­£ãªæ—¥ä»˜å½¢å¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
    // ã€çµæœæ¤œè¨¼ã€‘: ä¸æ­£ãªæ—¥ä»˜å½¢å¼ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
    expect(() => validateDate(date)).toThrow(ValidationError);
    // ã€ç¢ºèªå†…å®¹ã€‘: æ—¥ä»˜ã¯YYYY-MM-DDå½¢å¼ã§æŒ‡å®šã—ã¦ãã ã•ã„
    expect(() => validateDate(date)).toThrow('æ—¥ä»˜ã¯YYYY-MM-DDå½¢å¼ã§æŒ‡å®šã—ã¦ãã ã•ã„');
    // ã€ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§ã€‘: APIä»•æ§˜é•åã‚’äº‹å‰ã«æ¤œå‡º
  });

  /**
   * TC-ERROR-005: validateDate() - å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: å½¢å¼ã¯æ­£ã—ã„ãŒå®Ÿåœ¨ã—ãªã„æ—¥ä»˜ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: å®Ÿåœ¨ã—ãªã„æ—¥ä»˜"2025-13-40"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   * ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: å½¢å¼ã¯æ­£ã—ã„ãŒå®Ÿåœ¨ã—ãªã„æ—¥ä»˜
   * ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: ãƒ‡ãƒ¼ã‚¿ã®å¦¥å½“æ€§ç¢ºèª
   */
  it('TC-ERROR-005: validateDate() - å®Ÿåœ¨ã—ãªã„æ—¥ä»˜', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: 13æœˆ40æ—¥
    // ã€ä¸æ­£ãªç†ç”±ã€‘: 13æœˆ40æ—¥ã¯å­˜åœ¨ã—ãªã„
    // ã€å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ªã€‘: å…¥åŠ›ãƒŸã‚¹ã€ãƒ‡ãƒ¼ã‚¿ç ´æ
    const date = '2025-13-40';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateDate()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
    // ã€çµæœæ¤œè¨¼ã€‘: å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
    expect(() => validateDate(date)).toThrow(ValidationError);
    // ã€ç¢ºèªå†…å®¹ã€‘: å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ã§ã™
    expect(() => validateDate(date)).toThrow('å®Ÿåœ¨ã—ãªã„æ—¥ä»˜ã§ã™');
    // ã€ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§ã€‘: ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§ã®APIå‘¼ã³å‡ºã—ã‚’é˜²æ­¢
  });

  /**
   * TC-ERROR-006: validateDateRange() - é€†é †ã®æ—¥ä»˜ç¯„å›²ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: from > toã®æ—¥ä»˜ç¯„å›²ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: é–‹å§‹æ—¥"2025-12-31"ã‹ã‚‰çµ‚äº†æ—¥"2025-01-01"ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   * ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ¦‚è¦ã€‘: é–‹å§‹æ—¥ãŒçµ‚äº†æ—¥ã‚ˆã‚Šå¾Œ
   * ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®é‡è¦æ€§ã€‘: è«–ç†çš„ã«ç„¡åŠ¹ãªç¯„å›²ã®æ¤œå‡º
   */
  it('TC-ERROR-006: validateDateRange() - é€†é †ã®æ—¥ä»˜ç¯„å›²', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: from > to ã®æ—¥ä»˜ç¯„å›²ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: é€†é †ã®æ—¥ä»˜ç¯„å›²
    // ã€ä¸æ­£ãªç†ç”±ã€‘: çµ‚äº†æ—¥ãŒé–‹å§‹æ—¥ã‚ˆã‚Šå‰
    // ã€å®Ÿéš›ã®ç™ºç”Ÿã‚·ãƒŠãƒªã‚ªã€‘: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é †åºã®èª¤ã‚Š
    const from = '2025-12-31';
    const to = '2025-01-01';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateDateRange()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: é€†é †ã®æ—¥ä»˜ç¯„å›²ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
    // ã€çµæœæ¤œè¨¼ã€‘: é€†é †ã®æ—¥ä»˜ç¯„å›²ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
    expect(() => validateDateRange(from, to)).toThrow(ValidationError);
    // ã€ç¢ºèªå†…å®¹ã€‘: æ—¥ä»˜ç¯„å›²ãŒä¸æ­£ã§ã™ï¼ˆfrom > toï¼‰
    expect(() => validateDateRange(from, to)).toThrow('æ—¥ä»˜ç¯„å›²ãŒä¸æ­£ã§ã™ï¼ˆfrom > toï¼‰');
    // ã€ã‚·ã‚¹ãƒ†ãƒ ã®å®‰å…¨æ€§ã€‘: è«–ç†çš„ã«ç„¡åŠ¹ãªç¯„å›²ã§ã®APIå‘¼ã³å‡ºã—ã‚’é˜²æ­¢
  });
});

// =========================================
// å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ1ä»¶ï¼‰
// =========================================
describe('validator.ts - å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹', () => {
  /**
   * TC-BOUNDARY-001: validateRequiredParam() - nullå€¤ğŸ”µ
   *
   * ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: null/undefined/ç©ºæ–‡å­—åˆ—ãŒå¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸è¶³ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
   * ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: nullå€¤ã®æ¤œè¨¼
   * ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
   * ğŸ”µ ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«: é’ä¿¡å·ï¼ˆè¦ä»¶å®šç¾©æ›¸ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰æŠ½å‡ºï¼‰
   * ã€å¢ƒç•Œå€¤ã®æ„å‘³ã€‘: null/undefined/ç©ºæ–‡å­—åˆ—ã®å¢ƒç•Œ
   * ã€å¢ƒç•Œå€¤ã§ã®å‹•ä½œä¿è¨¼ã€‘: falsyãªå€¤ã®å³å¯†ãªåˆ¤å®š
   */
  it('TC-BOUNDARY-001: validateRequiredParam() - nullå€¤', () => {
    // Givenï¼ˆå‰ææ¡ä»¶ï¼‰: nullå€¤ã‚’æº–å‚™
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: nullå€¤
    // ã€å¢ƒç•Œå€¤é¸æŠã®æ ¹æ‹ ã€‘: JavaScriptã®falsyãªå€¤ã®ä»£è¡¨ä¾‹
    // ã€å®Ÿéš›ã®ä½¿ç”¨å ´é¢ã€‘: ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¤ã£ãŸä½¿ç”¨
    const value = null;
    const paramName = 'code';

    // Whenï¼ˆå®Ÿè¡Œï¼‰: validateRequiredParam()ã‚’å‘¼ã³å‡ºã—
    // ã€å®Ÿéš›ã®å‡¦ç†å®Ÿè¡Œã€‘: nullå€¤ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    // Thenï¼ˆæ¤œè¨¼ï¼‰: ValidationErrorãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹
    // ã€çµæœæ¤œè¨¼ã€‘: nullå€¤ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
    expect(() => validateRequiredParam(value, paramName)).toThrow(ValidationError);
    // ã€ç¢ºèªå†…å®¹ã€‘: å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ code ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“
    expect(() => validateRequiredParam(value, paramName)).toThrow('å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ code ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
    // ã€å¢ƒç•Œã§ã®æ­£ç¢ºæ€§ã€‘: null, undefined, '' ã™ã¹ã¦ãŒã‚¨ãƒ©ãƒ¼ã¨åˆ¤å®šã•ã‚Œã‚‹ã“ã¨
  });
});
